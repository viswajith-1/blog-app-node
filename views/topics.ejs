<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Current - A Modern Blog</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <!-- Configure Tailwind to use the sans-serif font -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Inter", "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>
  <body class="font-sans bg-gray-50 text-gray-900">
    <!-- Header Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <!-- Logo -->
          <div class="flex-shrink-0 flex items-center">
            <span class="text-3xl font-bold text-indigo-600">The Current</span>
          </div>
          <!-- Navigation Links -->
          <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
            <a
              href="/"
              class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"
            >
              Home
            </a>
            <a
              href="/about"
              class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"
            >
              About
            </a>
            <a
              href="/topics"
              class="inline-flex items-center px-1 pt-1 border-b-2 border-indigo-500 text-sm font-medium text-gray-900"
            >
              Topics
            </a>
            <a
              href="/contact"
              class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"
            >
              Contact
            </a>
            <a
              href="/create"
              class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700"
            >
              Create Post
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content - Blog Post Grid -->
    <main class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
  <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 mb-8">
    All Posts
  </h2>

  <form action="/topics" method="GET" class="mb-10">
    <label for="search" class="sr-only">Search Posts</label>
    <div class="flex rounded-md shadow-sm">
      <input
        type="search"
        name="search"
        id="search"
        class="flex-1 block w-full rounded-none rounded-l-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 sm:text-lg p-3"
        placeholder="Search by title, snippet, or author..."
        value="<%= typeof search !== 'undefined' ? search : '' %>"
      />
      <button
        type="submit"
        class="inline-flex items-center px-6 py-3 border border-l-0 border-indigo-600 bg-indigo-600 text-white font-bold rounded-r-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
      >
        Search
      </button>
    </div>
  </form>
  <div class="grid gap-10 md:grid-cols-2 lg:grid-cols-3">
    <% if(blogs.length > 0){ %> <% blogs.forEach(blog => { %>

    <div
      class="bg-white rounded-lg shadow-lg flex flex-col transition-all duration-300 hover:shadow-2xl hover:-translate-y-1"
    >
      <div class="p-8 flex-grow flex flex-col">
        <span
          class="text-indigo-600 text-sm font-medium uppercase tracking-wide"
          ><%= blog.genre %></span
        >

        <a href="/<%= blog._id %>" class="block mt-2">
          <h3
            class="text-3xl font-bold text-gray-900 hover:text-indigo-700"
          >
            <%= blog.title %>
          </h3>
        </a>

        <p class="mt-4 text-lg text-gray-600 flex-grow">
          <%= blog.snippet %>
        </p>

        <div class="mt-8">
          <p class="text-sm font-medium text-gray-900">
            <%= blog.author %>
          </p>
          <div class="flex space-x-1 text-sm text-gray-500">
            <time> <%= blog.createdAt.toDateString() %> </time>
          </div>
        </div>
      </div>
    </div>
    <% }) %> <% } else { %>

      <% if (typeof search !== 'undefined' && search) { %>
        <p class="text-lg text-gray-600 col-span-full text-center">
          No posts found matching your search for "<strong><%= search %></strong>".
        </p>
      <% } else { %>
        <p class="text-lg text-gray-600 col-span-full text-center">
          No Blogs to show yet.
        </p>
      <% } %>

    <% } %>
  </div>
  </main>

    <!-- Footer -->
    <footer class="bg-gray-800 mt-16">
      <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 text-center">
        <p class="text-base text-gray-400">
          &copy; 2025 The Current. All rights reserved.
        </p>
      </div>
    </footer>
  </body>
</html>
